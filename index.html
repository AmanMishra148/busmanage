<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Bus Pilgrimage Management System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Multi-Bus Pilgrimage Management System</h1>
            <p class="header-subtitle">Managing group pilgrimages across multiple buses with family booking support</p>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <button class="nav-btn active" data-section="dashboard">Dashboard</button>
            <button class="nav-btn" data-section="buses">Bus Management</button>
            <button class="nav-btn" data-section="participants">Participants</button>
            <button class="nav-btn" data-section="financial">Financial</button>
        </nav>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="section-header">
                <h2>Dashboard Overview</h2>
                <p class="section-subtitle">Multi-bus pilgrimage statistics and family bookings overview</p>
            </div>

            <div class="stats-grid">
                <div class="card stat-card">
                    <div class="card__body">
                        <h3>Total Participants</h3>
                        <div class="stat-number" id="totalParticipants">5</div>
                        <span class="stat-label">Across all buses</span>
                    </div>
                </div>
                <div class="card stat-card">
                    <div class="card__body">
                        <h3>Family Groups</h3>
                        <div class="stat-number" id="totalFamilies">2</div>
                        <span class="stat-label">Registered families</span>
                    </div>
                </div>
                <div class="card stat-card">
                    <div class="card__body">
                        <h3>Available Seats</h3>
                        <div class="stat-number" id="availableSeats">163</div>
                        <span class="stat-label">Remaining</span>
                    </div>
                </div>
                <div class="card stat-card">
                    <div class="card__body">
                        <h3>Next Trip</h3>
                        <div class="stat-date" id="nextTripDate">Aug 15, 2025</div>
                        <span class="stat-label">Vaishno Devi - 3 days</span>
                    </div>
                </div>
            </div>

            <div class="dashboard-content">
                <div class="card bus-overview">
                    <div class="card__body">
                        <h3>Bus Overview</h3>
                        <div class="bus-stats-grid" id="busStatsGrid">
                            <!-- Bus statistics will be generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="card financial-summary">
                    <div class="card__body">
                        <h3>Financial Summary</h3>
                        <div class="financial-stats">
                            <div class="financial-item">
                                <span class="financial-label">Total Expected</span>
                                <span class="financial-amount" id="totalExpected">₹7,500</span>
                            </div>
                            <div class="financial-item">
                                <span class="financial-label">Amount Collected</span>
                                <span class="financial-amount collected" id="totalCollected">₹6,000</span>
                            </div>
                            <div class="financial-item">
                                <span class="financial-label">Outstanding</span>
                                <span class="financial-amount outstanding" id="totalOutstanding">₹1,500</span>
                            </div>
                        </div>
                        <div class="chart-container" style="position: relative; height: 200px;">
                            <canvas id="financialChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card recent-activity">
                    <div class="card__body">
                        <h3>Recent Activity</h3>
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <span class="activity-text">Sharma family registered for Bus 1, seats 1-3</span>
                                <span class="activity-time">2 days ago</span>
                            </div>
                            <div class="activity-item">
                                <span class="activity-text">Payment received from Sharma family - ₹4,500</span>
                                <span class="activity-time">2 days ago</span>
                            </div>
                            <div class="activity-item">
                                <span class="activity-text">Patel family registered for Bus 1, seats 4-5</span>
                                <span class="activity-time">1 day ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bus Management Section -->
        <section id="buses" class="section">
            <div class="section-header">
                <h2>Bus Management</h2>
                <p class="section-subtitle">Manage seats and family assignments across multiple buses</p>
                <button class="btn btn--primary" id="addBusBtn">Add New Bus</button>
            </div>

            <!-- Bus Toggle Controls -->
            <div class="bus-controls">
                <div class="bus-tabs" id="busTabs">
                    <!-- Bus tabs will be generated by JavaScript -->
                </div>
                <div class="bus-info" id="busInfo">
                    <div class="bus-stats">
                        <span class="bus-stat">
                            <strong>Capacity:</strong> <span id="currentBusCapacity">56</span> seats
                        </span>
                        <span class="bus-stat">
                            <strong>Occupied:</strong> <span id="currentBusOccupied">0</span> seats
                        </span>
                        <span class="bus-stat">
                            <strong>Available:</strong> <span id="currentBusAvailable">56</span> seats
                        </span>
                    </div>
                </div>
            </div>

            <!-- Selection Mode Controls -->
            <div class="selection-mode-controls">
                <div class="card">
                    <div class="card__body">
                        <div class="selection-mode-header">
                            <h3>Seat Selection Mode</h3>
                            <div class="selection-mode-toggle">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="multiSelectionMode">
                                    <span class="toggle-slider"></span>
                                </label>
                                <span class="toggle-label" id="selectionModeLabel">Single Selection</span>
                            </div>
                        </div>
                        <p class="selection-mode-description" id="selectionModeDescription">
                            Click on individual seats to select one at a time
                        </p>
                        <div class="selected-seats-info" id="selectedSeatsInfo" style="display: none;">
                            <div class="selected-seats-display">
                                <strong>Selected Seats:</strong> <span id="selectedSeatsList">None</span>
                            </div>
                            <div class="selection-actions">
                                <button class="btn btn--primary" id="assignSelectedSeatsBtn">Assign to Family</button>
                                <button class="btn btn--secondary" id="clearAllSelectionsBtn">Clear All</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bus-container">
                <div class="card">
                    <div class="card__body">
                        <div class="bus-header">
                            <h3 id="currentBusTitle">Bus 1 - Seat Layout</h3>
                            <div class="bus-legend">
                                <div class="legend-item">
                                    <div class="seat-demo available"></div>
                                    <span>Available</span>
                                </div>
                                <div class="legend-item">
                                    <div class="seat-demo booked"></div>
                                    <span>Booked</span>
                                </div>
                                <div class="legend-item">
                                    <div class="seat-demo selected"></div>
                                    <span>Selected</span>
                                </div>
                                <div class="legend-item">
                                    <div class="seat-demo disabled"></div>
                                    <span>Maintenance</span>
                                </div>
                            </div>
                        </div>

                        <div class="bus-layout" id="busLayout">
                            <!-- Bus seats will be generated by JavaScript -->
                        </div>

                        <div class="seat-selection-info" id="seatSelectionInfo" style="display: none;">
                            <h4>Selected Seat: <span id="selectedSeatNumber"></span> on <span id="selectedBusName"></span></h4>
                            <p>Assign this seat to a participant or view details</p>
                            <div class="seat-actions">
                                <button class="btn btn--primary" id="assignSeatBtn">Assign Seat</button>
                                <button class="btn btn--secondary" id="clearSelectionBtn">Clear Selection</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Participants Section -->
        <section id="participants" class="section">
            <div class="section-header">
                <h2>Participants Management</h2>
                <p class="section-subtitle">Manage pilgrim registrations and family bookings</p>
                <div class="section-controls">
                    <select class="form-control" id="filterByBus" style="width: 200px;">
                        <option value="">All Buses</option>
                    </select>
                    <button class="btn btn--primary" id="addFamilyBtn">Add Family</button>
                    <button class="btn btn--secondary" id="addParticipantBtn">Add Individual</button>
                </div>
            </div>

            <div class="participants-container">
                <div class="card">
                    <div class="card__body">
                        <div class="participants-table">
                            <table id="participantsTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Age</th>
                                        <th>Phone</th>
                                        <th>Family</th>
                                        <th>Bus</th>
                                        <th>Seats</th>
                                        <th>Payment Status</th>
                                        <th>Amount Paid</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="participantsTableBody">
                                    <!-- Participant rows will be generated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Financial Section -->
        <section id="financial" class="section">
            <div class="section-header">
                <h2>Financial Management</h2>
                <p class="section-subtitle">Track payments and generate financial reports across all buses</p>
            </div>

            <div class="financial-container">
                <div class="card settings-card">
                    <div class="card__body">
                        <h3>Trip Settings</h3>
                        <div class="form-group">
                            <label class="form-label">Adult Fare (₹)</label>
                            <input type="number" class="form-control" id="adultFareInput" value="1500">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Child Fare (₹)</label>
                            <input type="number" class="form-control" id="childFareInput" value="1000">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Senior Fare (₹)</label>
                            <input type="number" class="form-control" id="seniorFareInput" value="1200">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Next Trip Date</label>
                            <input type="date" class="form-control" id="nextTripInput" value="2025-08-15">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Destination</label>
                            <input type="text" class="form-control" id="destinationInput" value="Vaishno Devi">
                        </div>
                        <button class="btn btn--primary" id="updateSettingsBtn">Update Settings</button>
                    </div>
                </div>

                <div class="card bus-payments-card">
                    <div class="card__body">
                        <h3>Bus-wise Payment Status</h3>
                        <div class="bus-payments-grid" id="busPaymentsGrid">
                            <!-- Bus payment summaries will be generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="card reports-card">
                    <div class="card__body">
                        <h3>Financial Reports</h3>
                        <div class="report-stats">
                            <div class="report-item">
                                <span class="report-label">Families with Outstanding Payments</span>
                                <span class="report-value" id="outstandingCount">1</span>
                            </div>
                            <div class="report-item">
                                <span class="report-label">Overall Collection Rate</span>
                                <span class="report-value" id="collectionRate">80%</span>
                            </div>
                            <div class="report-item">
                                <span class="report-label">Buses with Full Payment</span>
                                <span class="report-value" id="fullPaidBuses">1/3</span>
                            </div>
                        </div>
                        <div class="report-actions">
                            <button class="btn btn--outline" id="exportReportBtn">Export Full Report</button>
                            <button class="btn btn--secondary" id="exportBusReportBtn">Export Bus-wise Report</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Add Family Modal -->
        <div id="addFamilyModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Family Booking</h3>
                    <button class="modal-close" id="closeFamilyModalBtn">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addFamilyForm">
                        <div class="form-group">
                            <label class="form-label">Family Name *</label>
                            <input type="text" class="form-control" id="familyName" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Number of Members *</label>
                            <select class="form-control" id="numberOfMembers" required>
                                <option value="">Select number</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bus Assignment *</label>
                            <select class="form-control" id="familyBus" required>
                                <option value="">Select Bus</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Payment Status</label>
                            <select class="form-control" id="familyPaymentStatus">
                                <option value="pending">Pending</option>
                                <option value="paid">Paid</option>
                                <option value="partial">Partial</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Amount Paid (₹)</label>
                            <input type="number" class="form-control" id="familyAmountPaid" value="0">
                        </div>
                        <div id="familyMembersContainer">
                            <!-- Family member details will be added dynamically -->
                        </div>
                        <div class="selected-seats-summary" id="selectedSeatsSummary" style="display: none;">
                            <h4>Selected Seats</h4>
                            <p id="selectedSeatsForFamily">None selected</p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--secondary" id="cancelFamilyModalBtn">Cancel</button>
                    <button class="btn btn--primary" id="saveFamilyBtn">Save Family</button>
                </div>
            </div>
        </div>

        <!-- Add Participant Modal -->
        <div id="addParticipantModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Individual Participant</h3>
                    <button class="modal-close" id="closeModalBtn">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addParticipantForm">
                        <div class="form-group">
                            <label class="form-label">Full Name *</label>
                            <input type="text" class="form-control" id="participantName" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Age *</label>
                            <input type="number" class="form-control" id="participantAge" required min="1" max="120">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone Number *</label>
                            <input type="tel" class="form-control" id="participantPhone" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bus Assignment *</label>
                            <select class="form-control" id="participantBus" required>
                                <option value="">Select Bus</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Seat Number</label>
                            <select class="form-control" id="participantSeat">
                                <option value="">Select Seat (Optional)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Payment Status</label>
                            <select class="form-control" id="participantPaymentStatus">
                                <option value="pending">Pending</option>
                                <option value="paid">Paid</option>
                                <option value="partial">Partial</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Amount Paid (₹)</label>
                            <input type="number" class="form-control" id="participantAmountPaid" value="0">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--secondary" id="cancelModalBtn">Cancel</button>
                    <button class="btn btn--primary" id="saveParticipantBtn">Save Participant</button>
                </div>
            </div>
        </div>

        <!-- Payment Update Modal -->
        <div id="paymentModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Update Family Payment</h3>
                    <button class="modal-close" id="closePaymentModalBtn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="payment-participant-info">
                        <h4 id="paymentFamilyName"></h4>
                        <p>Bus: <span id="paymentFamilyBus"></span> | Seats: <span id="paymentFamilySeats"></span></p>
                        <p>Members: <span id="paymentFamilyMembers"></span></p>
                        <p>Current Status: <span id="paymentCurrentStatus"></span></p>
                        <p>Amount Paid: ₹<span id="paymentCurrentAmount"></span></p>
                        <p>Total Expected: ₹<span id="paymentTotalExpected"></span></p>
                    </div>
                    <form id="updatePaymentForm">
                        <div class="form-group">
                            <label class="form-label">Payment Status</label>
                            <select class="form-control" id="updatePaymentStatus">
                                <option value="pending">Pending</option>
                                <option value="paid">Paid</option>
                                <option value="partial">Partial</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Amount Paid (₹)</label>
                            <input type="number" class="form-control" id="updateAmountPaid">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--secondary" id="cancelPaymentModalBtn">Cancel</button>
                    <button class="btn btn--primary" id="savePaymentBtn">Update Payment</button>
                </div>
            </div>
        </div>

        <!-- Add Bus Modal -->
        <div id="addBusModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add New Bus</h3>
                    <button class="modal-close" id="closeAddBusModalBtn">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addBusForm">
                        <div class="form-group">
                            <label class="form-label">Bus Name *</label>
                            <input type="text" class="form-control" id="busName" required placeholder="e.g., Bus 4">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bus Capacity</label>
                            <input type="number" class="form-control" id="busCapacity" value="56" readonly>
                            <small class="form-text">Standard bus layout: 56 seats</small>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--secondary" id="cancelAddBusBtn">Cancel</button>
                    <button class="btn btn--primary" id="saveBusBtn">Add Bus</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>